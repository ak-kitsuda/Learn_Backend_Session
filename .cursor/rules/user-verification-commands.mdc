---
description: 
globs: 
alwaysApply: true
---
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»APIã‚µãƒ¼ãƒãƒ¼å‹•ä½œç¢ºèªã‚³ãƒžãƒ³ãƒ‰ãƒ«ãƒ¼ãƒ«

## åŸºæœ¬æ–¹é‡
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç¢ºèªã‚„ã‚µãƒ¼ãƒãƒ¼å‹•ä½œç¢ºèªã¯ã€å­¦ç¿’åŠ¹æžœã‚’é«˜ã‚ã‚‹ãŸã‚ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªèº«ãŒæ‰‹å‹•ã§ã‚³ãƒžãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ç¢ºèªã™ã‚‹ã“ã¨ã‚’æŽ¨å¥¨ã™ã‚‹ã€‚å„ã‚³ãƒžãƒ³ãƒ‰ã®è©³ç´°ãªæ‰‹é †ã€æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›ã€å…¥åŠ›/å‡ºåŠ›ã®è§£èª¬ã‚’å«ã‚ã‚‹ã€‚

## é©ç”¨å ´é¢

### 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é–¢é€£ã®ç¢ºèª
- ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆå¾Œã®ç¢ºèª
- ãƒ‡ãƒ¼ã‚¿æŒ¿å…¥å¾Œã®ç¢ºèª
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ ã®ç¢ºèª
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¹ãƒˆã‚¢ã®ç¢ºèª
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã®ç¢ºèª

### 2. ã‚µãƒ¼ãƒãƒ¼å‹•ä½œç¢ºèª
- APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ
- èªè¨¼æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã®ãƒ†ã‚¹ãƒˆ
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ç¢ºèª
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼ã®ç¢ºèª

### 3. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å‹•ä½œç¢ºèª
- ç’°å¢ƒè¨­å®šã®ç¢ºèª
- ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®å‹•ä½œç¢ºèª
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã®ç¢ºèª

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç¢ºèªã‚³ãƒžãƒ³ãƒ‰è©³ç´°

### 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª

#### ã‚³ãƒžãƒ³ãƒ‰
```bash
ls -la backend/database/
```

#### å…¥åŠ›ã®èª¬æ˜Ž
- `ls`: ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§è¡¨ç¤ºã‚³ãƒžãƒ³ãƒ‰
- `-la`: è©³ç´°è¡¨ç¤ºï¼ˆ-lï¼‰ã¨éš ã—ãƒ•ã‚¡ã‚¤ãƒ«è¡¨ç¤ºï¼ˆ-aï¼‰ã‚ªãƒ—ã‚·ãƒ§ãƒ³
- `backend/database/`: å¯¾è±¡ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹

#### æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›
```
total 28
drwxr-xr-x 2 user user  4096 Dec 15 10:30 .
drwxr-xr-x 6 user user  4096 Dec 15 10:25 ..
-rw-r--r-- 1 user user 12288 Dec 15 10:30 sessions.db
-rw-r--r-- 1 user user 20480 Dec 15 10:30 todo.db
```

#### å‡ºåŠ›ã®è§£èª¬
- **ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º**: 
  - `sessions.db`: ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆé€šå¸¸12KBï½žï¼‰
  - `todo.db`: ãƒ¡ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆå¾Œ20KBï½žï¼‰
- **æ¨©é™**: `-rw-r--r--`ï¼ˆèª­ã¿æ›¸ãå¯èƒ½ï¼‰
- **ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—**: æœ€çµ‚æ›´æ–°æ—¥æ™‚

#### ã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨å¯¾å¿œ
```bash
# ã‚¨ãƒ©ãƒ¼ä¾‹1: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã—ãªã„
ls: cannot access 'backend/database/': No such file or directory
# å¯¾å¿œ: mkdir -p backend/database

# ã‚¨ãƒ©ãƒ¼ä¾‹2: ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒ0ãƒã‚¤ãƒˆ
-rw-r--r-- 1 user user     0 Dec 15 10:30 todo.db
# å¯¾å¿œ: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–ãŒå¿…è¦
```

### 2. SQLiteãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å†…å®¹ç¢ºèª

#### ã‚³ãƒžãƒ³ãƒ‰ï¼ˆå¯¾è©±åž‹ï¼‰
```bash
sqlite3 backend/database/todo.db
```

#### SQLiteãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã®æ“ä½œ
```sql
-- ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§è¡¨ç¤º
.tables

-- ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ç¢ºèª
.schema users

-- ãƒ‡ãƒ¼ã‚¿ç¢ºèª
SELECT * FROM users;

-- çµ‚äº†
.quit
```

#### æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›ä¾‹
```sql
sqlite> .tables
users

sqlite> .schema users
CREATE TABLE users (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  username TEXT UNIQUE NOT NULL,
  email TEXT UNIQUE NOT NULL,
  password_hash TEXT NOT NULL,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

sqlite> SELECT * FROM users;
1|testuser|test@example.com|$2b$10$...|2024-12-15 10:30:00|2024-12-15 10:30:00

sqlite> .quit
```

#### ã‚³ãƒžãƒ³ãƒ‰ï¼ˆéžå¯¾è©±åž‹ï¼‰
```bash
# ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§
sqlite3 backend/database/todo.db ".tables"

# ã‚¹ã‚­ãƒ¼ãƒžç¢ºèª
sqlite3 backend/database/todo.db ".schema users"

# ãƒ‡ãƒ¼ã‚¿ç¢ºèª
sqlite3 backend/database/todo.db "SELECT COUNT(*) FROM users;"
```

#### å‡ºåŠ›ã®è§£èª¬
- **ãƒ†ãƒ¼ãƒ–ãƒ«å**: `users`ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
- **ã‚«ãƒ©ãƒ æ§‹é€ **: 
  - `id`: ä¸»ã‚­ãƒ¼ï¼ˆè‡ªå‹•å¢—åˆ†ï¼‰
  - `username`: ãƒ¦ãƒ¼ã‚¶ãƒ¼åï¼ˆãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ï¼‰
  - `email`: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ï¼‰
  - `password_hash`: ãƒãƒƒã‚·ãƒ¥åŒ–ã•ã‚ŒãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
  - `created_at/updated_at`: ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—

### 3. Node.jsã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã‚ˆã‚‹ç¢ºèª

#### ã‚³ãƒžãƒ³ãƒ‰
```bash
node backend/scripts/check-tables.js
```

#### æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›
```
ðŸ“‹ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ç¢ºèªçµæžœ:

âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶šæˆåŠŸ
ðŸ“Š ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§:
  - users

ðŸ” usersãƒ†ãƒ¼ãƒ–ãƒ«è©³ç´°:
  - id: INTEGER (PRIMARY KEY)
  - username: TEXT NOT NULL
  - email: TEXT NOT NULL  
  - password_hash: TEXT NOT NULL
  - created_at: DATETIME DEFAULT CURRENT_TIMESTAMP
  - updated_at: DATETIME DEFAULT CURRENT_TIMESTAMP

ðŸ“ˆ ãƒ‡ãƒ¼ã‚¿ä»¶æ•°: 1ä»¶
```

#### ã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨å¯¾å¿œ
```
âŒ ã‚¨ãƒ©ãƒ¼: SQLITE_CANTOPEN: unable to open database file
# å¯¾å¿œ: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®ç¢ºèª

âŒ ã‚¨ãƒ©ãƒ¼: no such table: users
# å¯¾å¿œ: ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡ŒãŒå¿…è¦
```

## APIã‚µãƒ¼ãƒãƒ¼ç¢ºèªã‚³ãƒžãƒ³ãƒ‰è©³ç´°

### 1. ã‚µãƒ¼ãƒãƒ¼èµ·å‹•ç¢ºèª

#### ã‚³ãƒžãƒ³ãƒ‰
```bash
cd backend && npm run dev
```

#### æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›
```
> backend@1.0.0 dev
> nodemon server.js

[nodemon] 3.0.2
[nodemon] to restart at any time, enter `rs`
[nodemon] watching path(s): *.*
[nodemon] watching extensions: js,mjs,json
[nodemon] starting `node server.js`

ðŸš€ ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¾ã—ãŸ
ðŸŒ ãƒãƒ¼ãƒˆ: 3000
ðŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶š: æˆåŠŸ
â° èµ·å‹•æ™‚åˆ»: 2024-12-15T10:30:00.000Z
```

#### å‡ºåŠ›ã®è§£èª¬
- **nodemon**: é–‹ç™ºç”¨ã‚µãƒ¼ãƒãƒ¼ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´æ™‚è‡ªå‹•å†èµ·å‹•ï¼‰
- **ãƒãƒ¼ãƒˆ3000**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒãƒªãƒƒã‚¹ãƒ³ã™ã‚‹ãƒãƒ¼ãƒˆ
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶šæˆåŠŸ**: SQLiteæŽ¥ç¶šç¢ºèª
- **èµ·å‹•æ™‚åˆ»**: ã‚µãƒ¼ãƒãƒ¼é–‹å§‹æ™‚åˆ»

#### ã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨å¯¾å¿œ
```
Error: listen EADDRINUSE :::3000
# å¯¾å¿œ: ãƒãƒ¼ãƒˆ3000ãŒä½¿ç”¨ä¸­ã€åˆ¥ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’åœæ­¢ã¾ãŸã¯åˆ¥ãƒãƒ¼ãƒˆä½¿ç”¨

Error: SQLITE_CANTOPEN: unable to open database file
# å¯¾å¿œ: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®ç¢ºèª
```

### 2. åŸºæœ¬APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒ†ã‚¹ãƒˆ

#### ã‚³ãƒžãƒ³ãƒ‰
```bash
curl -X GET http://localhost:3000/api/hello
```

#### å…¥åŠ›ã®èª¬æ˜Ž
- `curl`: HTTPé€šä¿¡ã‚³ãƒžãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«
- `-X GET`: HTTPãƒ¡ã‚½ãƒƒãƒ‰æŒ‡å®šï¼ˆGETãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰
- `http://localhost:3000`: ã‚µãƒ¼ãƒãƒ¼ã‚¢ãƒ‰ãƒ¬ã‚¹
- `/api/hello`: ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒ‘ã‚¹

#### æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›
```json
{
  "message": "Hello from Express API!",
  "timestamp": "2024-12-15T10:30:00.000Z",
  "status": "success"
}
```

#### å‡ºåŠ›ã®è§£èª¬
- **JSONå½¢å¼**: ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ã®å½¢å¼
- **message**: APIã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- **timestamp**: ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆæ™‚åˆ»
- **status**: å‡¦ç†çµæžœã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

#### è©³ç´°ç¢ºèªï¼ˆãƒ˜ãƒƒãƒ€ãƒ¼æƒ…å ±å«ã‚€ï¼‰
```bash
curl -v http://localhost:3000/api/hello
```

#### è©³ç´°å‡ºåŠ›ä¾‹
```
* Connected to localhost (127.0.0.1) port 3000 (#0)
> GET /api/hello HTTP/1.1
> Host: localhost:3000
> User-Agent: curl/7.81.0
> Accept: */*
> 
< HTTP/1.1 200 OK
< X-Powered-By: Express
< Access-Control-Allow-Origin: *
< Content-Type: application/json; charset=utf-8
< Content-Length: 87
< ETag: W/"57-example"
< Date: Sun, 15 Dec 2024 10:30:00 GMT
< Connection: keep-alive
< Keep-Alive: timeout=5
< 
{
  "message": "Hello from Express API!",
  "timestamp": "2024-12-15T10:30:00.000Z",
  "status": "success"
}
```

### 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶šAPIãƒ†ã‚¹ãƒˆ

#### ã‚³ãƒžãƒ³ãƒ‰
```bash
curl -X GET http://localhost:3000/api/db-test
```

#### æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›
```json
{
  "message": "ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶šãƒ†ã‚¹ãƒˆæˆåŠŸ",
  "database": "SQLite",
  "timestamp": "2024-12-15T10:30:00.000Z",
  "tables": ["users"]
}
```

### 4. èªè¨¼APIãƒ†ã‚¹ãƒˆï¼ˆPhase2ä»¥é™ï¼‰

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ†ã‚¹ãƒˆ
```bash
curl -X POST http://localhost:3000/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "email": "test@example.com", 
    "password": "password123"
  }'
```

#### å…¥åŠ›ã®èª¬æ˜Ž
- `-X POST`: POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆ
- `-H "Content-Type: application/json"`: ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼è¨­å®š
- `-d '{...}'`: ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ï¼ˆJSONå½¢å¼ï¼‰

#### æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›ï¼ˆæˆåŠŸæ™‚ï¼‰
```json
{
  "message": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æˆåŠŸ",
  "user": {
    "id": 1,
    "username": "testuser",
    "email": "test@example.com"
  },
  "timestamp": "2024-12-15T10:30:00.000Z"
}
```

#### ã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨å¯¾å¿œ
```json
// ã‚¨ãƒ©ãƒ¼ä¾‹1: ãƒ¦ãƒ¼ã‚¶ãƒ¼åé‡è¤‡
{
  "error": "ãƒ¦ãƒ¼ã‚¶ãƒ¼åãŒæ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™",
  "code": "DUPLICATE_USERNAME"
}

// ã‚¨ãƒ©ãƒ¼ä¾‹2: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
{
  "error": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯8æ–‡å­—ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™",
  "code": "VALIDATION_ERROR"
}
```

#### ãƒ­ã‚°ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆï¼ˆã‚¯ãƒƒã‚­ãƒ¼ä¿å­˜ï¼‰
```bash
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "password": "password123"
  }' \
  -c cookies.txt
```

#### å…¥åŠ›ã®èª¬æ˜Ž
- `-c cookies.txt`: ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¯ãƒƒã‚­ãƒ¼ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜

#### æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›
```json
{
  "message": "ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ",
  "user": {
    "id": 1,
    "username": "testuser",
    "email": "test@example.com"
  }
}
```

#### èªè¨¼çŠ¶æ…‹ç¢ºèªãƒ†ã‚¹ãƒˆ
```bash
curl -X GET http://localhost:3000/api/auth/me \
  -b cookies.txt
```

#### å…¥åŠ›ã®èª¬æ˜Ž
- `-b cookies.txt`: ä¿å­˜ã•ã‚ŒãŸã‚¯ãƒƒã‚­ãƒ¼ã‚’é€ä¿¡

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨å¯¾å¿œæ–¹æ³•

### 1. æŽ¥ç¶šã‚¨ãƒ©ãƒ¼
```bash
curl: (7) Failed to connect to localhost port 3000: Connection refused
```
**å¯¾å¿œæ–¹æ³•:**
1. ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª: `ps aux | grep node`
2. ãƒãƒ¼ãƒˆ3000ãŒä½¿ç”¨ä¸­ã‹ç¢ºèª: `netstat -tlnp | grep 3000`
3. ã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•: `npm run dev`

### 2. JSONãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼
```json
{
  "error": "Unexpected token in JSON at position 0"
}
```
**å¯¾å¿œæ–¹æ³•:**
1. ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã®JSONå½¢å¼ã‚’ç¢ºèª
2. Content-Typeãƒ˜ãƒƒãƒ€ãƒ¼ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
3. ç‰¹æ®Šæ–‡å­—ã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ç¢ºèª

### 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼
```json
{
  "error": "SQLITE_ERROR: no such table: users"
}
```
**å¯¾å¿œæ–¹æ³•:**
1. ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œ: `node backend/scripts/create-users-table.js`
2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ç¢ºèª: `ls -la backend/database/`
3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¨©é™ã®ç¢ºèª

## æ®µéšŽçš„ç¢ºèªãƒ—ãƒ­ã‚»ã‚¹

### Phase1å®Œäº†ç¢ºèª
```bash
# 1. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ç¢ºèª
ls -la backend/

# 2. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç¢ºèª
cd backend && npm list --depth=0

# 3. ã‚µãƒ¼ãƒãƒ¼èµ·å‹•ãƒ†ã‚¹ãƒˆ
npm run dev

# 4. åŸºæœ¬APIç¢ºèªï¼ˆåˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼‰
curl http://localhost:3000/api/hello
curl http://localhost:3000/api/db-test
```

### Phase2å®Œäº†ç¢ºèª
```bash
# 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ç¢ºèª
sqlite3 backend/database/todo.db ".tables"

# 2. ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ç¢ºèª
node backend/scripts/check-tables.js

# 3. èªè¨¼APIç¢ºèª
curl -X POST http://localhost:3000/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"username":"testuser","email":"test@example.com","password":"password123"}'

# 4. ãƒ­ã‚°ã‚¤ãƒ³ç¢ºèª
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"testuser","password":"password123"}' \
  -c cookies.txt

# 5. èªè¨¼çŠ¶æ…‹ç¢ºèª
curl -X GET http://localhost:3000/api/auth/me -b cookies.txt
```

## ãƒ‡ãƒãƒƒã‚°ã¨ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### 1. ãƒ­ã‚°ç¢ºèªæ–¹æ³•
```bash
# ã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°ã®ç¢ºèª
tail -f backend/logs/app.log

# ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚°ã®ç¢ºèªï¼ˆUbuntu/Debianï¼‰
journalctl -f

# ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
ps aux | grep node
```

### 2. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç¢ºèª
```bash
# ãƒãƒ¼ãƒˆä½¿ç”¨çŠ¶æ³ç¢ºèª
netstat -tlnp | grep 3000

# ãƒ­ãƒ¼ã‚«ãƒ«æŽ¥ç¶šãƒ†ã‚¹ãƒˆ
telnet localhost 3000

# DNSè§£æ±ºç¢ºèª
nslookup localhost
```

### 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ•´åˆæ€§ç¢ºèª
```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
sqlite3 backend/database/todo.db "PRAGMA integrity_check;"

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µã‚¤ã‚ºç¢ºèª
du -h backend/database/todo.db

# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
cp backend/database/todo.db backend/database/todo.db.backup
```

## å­¦ç¿’åŠ¹æžœã®å‘ä¸Š

### 1. ç†è§£ã®ä¿ƒé€²
- **ã‚³ãƒžãƒ³ãƒ‰å®Ÿè¡Œ**: ãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªèº«ãŒã‚³ãƒžãƒ³ãƒ‰ã‚’æ‰“ã¤ã“ã¨ã§ç†è§£ãŒæ·±ã¾ã‚‹
- **çµæžœç¢ºèª**: å®Ÿéš›ã®å‡ºåŠ›ã‚’è¦‹ã‚‹ã“ã¨ã§å‹•ä½œã‚’ä½“æ„Ÿã§ãã‚‹
- **ã‚¨ãƒ©ãƒ¼ä½“é¨“**: ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã®å¯¾å‡¦æ³•ã‚’å­¦ã¹ã‚‹

### 2. å®Ÿè·µã‚¹ã‚­ãƒ«ã®å‘ä¸Š
- **ã‚³ãƒžãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³æ“ä½œ**: Linux/Unixã‚³ãƒžãƒ³ãƒ‰ã«æ…£ã‚Œã‚‹
- **ãƒ‡ãƒãƒƒã‚°ã‚¹ã‚­ãƒ«**: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®èª­ã¿æ–¹ã¨ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
- **APIç†è§£**: HTTPé€šä¿¡ã¨RESTful APIã®ä»•çµ„ã¿ç†è§£

### 3. æ®µéšŽçš„ãªç¢ºèªç¿’æ…£
- **å„ã‚¹ãƒ†ãƒƒãƒ—ã§ã®ç¢ºèª**: å•é¡Œã®æ—©æœŸç™ºè¦‹ã¨ä¿®æ­£
- **å‹•ä½œæ¤œè¨¼**: æœŸå¾…é€šã‚Šã«å‹•ä½œã™ã‚‹ã“ã¨ã®ç¢ºèª
- **æ¬¡ã‚¹ãƒ†ãƒƒãƒ—ã¸ã®æº–å‚™**: å®‰å¿ƒã—ã¦æ¬¡ã®æ®µéšŽã«é€²ã‚ã‚‹

## æ³¨æ„äº‹é …

### 1. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®
- **æœ¬ç•ªç’°å¢ƒã§ã®æ³¨æ„**: é–‹ç™ºç’°å¢ƒä»¥å¤–ã§ã¯æ…Žé‡ã«ã‚³ãƒžãƒ³ãƒ‰å®Ÿè¡Œ
- **èªè¨¼æƒ…å ±ã®å–ã‚Šæ‰±ã„**: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚„ãƒˆãƒ¼ã‚¯ãƒ³ã®é©åˆ‡ãªç®¡ç†
- **ãƒ­ã‚°æƒ…å ±ã®ä¿è­·**: æ©Ÿå¯†æƒ…å ±ãŒãƒ­ã‚°ã«å‡ºåŠ›ã•ã‚Œãªã„ã‚ˆã†æ³¨æ„

### 2. ç’°å¢ƒä¾å­˜ã¸ã®å¯¾å¿œ
- **OSå›ºæœ‰ã‚³ãƒžãƒ³ãƒ‰**: Windows/Mac/Linuxã§ã®é•ã„ã‚’è€ƒæ…®
- **ãƒ‘ã‚¹åŒºåˆ‡ã‚Šæ–‡å­—**: `/`ï¼ˆUnixç³»ï¼‰ã¨`\`ï¼ˆWindowsï¼‰ã®é•ã„
- **æ¨©é™å•é¡Œ**: ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ç¢ºèª

### 3. æ®µéšŽçš„å®Ÿè¡Œã®é‡è¦æ€§
- **ä¸€åº¦ã«å¤šãã®ã‚³ãƒžãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãªã„**: 1ã¤ãšã¤ç¢ºå®Ÿã«å®Ÿè¡Œ
- **å‰ã‚¹ãƒ†ãƒƒãƒ—ã®å®Œäº†ç¢ºèª**: æ¬¡ã«é€²ã‚€å‰ã«å¿…ãšçµæžœã‚’ç¢ºèª
- **ã‚¨ãƒ©ãƒ¼æ™‚ã®å¯¾å¿œ**: ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã‚‰å³åº§ã«å¯¾å‡¦

ã“ã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨APIã‚µãƒ¼ãƒãƒ¼ã®å‹•ä½œç¢ºèªã‚’ä½“ç³»çš„ã«è¡Œã„ã€å­¦ç¿’åŠ¹æžœã‚’æœ€å¤§åŒ–ã—ã¾ã™ã€‚
